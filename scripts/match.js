
// JSON data for exercises
const exercises = {
  exercise1: {
    title : "ஒருமை பன்மை",
    description : "ஒருமைச்‌ சொற்களை பன்மைச்‌ சொற்களோடு பொருத்துக",
    titleA :'ஒருமை',
    titleB :'பன்மை',
    data: {
    "குழந்தை": "குழந்தைகள்‌‌",
    "இலை": "இலைகள்‌",
    "பள்ளி": "பள்ளிகள்‌",
    "மிதிவண்டி": "மிதிவண்டிகள்",
    "யானை": "யானைகள்",
    "பழம்‌": "‌பழங்கள்‌",
    "காகிதம்‌": "காகிதங்கள்‌",
    "விமானம்‌": "விமானங்கள்‌",
    "கடிகாரம்‌": "கடிகாரங்கள்‌",
    "கடிதம்‌": "கடிதங்கள்‌",
    "ஓவியம்‌": "ஓவியங்கள்‌",
    "புத்தகம்‌": "புத்தகங்கள்‌",
    "பாடம்‌": "பாடங்கள்‌"
  }},
  exercise2: {
    title : "ஒருமை பன்மை",
    description : "ஒருமைச்‌ சொற்களை பன்மைச்‌ சொற்களோடு பொருத்துக",
    titleA :'ஒருமை',
    titleB :'பன்மை',
    data: {
    "நான்‌": "நாங்கள்‌",
    "இருக்கிறது": "இருக்கின்றன",
    "துரத்துகிறது": "துரத்துகின்றன",
    "ஓடினான்‌": "ஓடினார்கள்‌",
    "செய்தாள்‌": "செய்தார்கள்",
    "பார்த்தார்‌": "பார்த்தார்கள்‌",
    "தேடினாள்‌": "தேடினார்கள்‌",
    "அது": "அவை",
    "அவன்‌": "அவர்கள்‌",
    "இவள்‌": "இவர்கள்‌",
    "நீ": "நீங்கள்‌",
    "புறா": "புறாக்கள்‌",
    "பேனா": "பேனாக்கள்‌"
  }},
  exercise3: {
    title : "ஆண்பால்‌ பெண்பால்‌",
    description : "ஆண்பால்‌ சொற்களை பெண்பால்‌ சொற்களோடு பொருத்து",
    titleA :'ஆண்பால்‌',
    titleB :'பெண்பால்‌',
    data: {
    "மாமா": "அத்தை",
    "அம்மா": "அப்பா",
    "அண்ணன்":"அண்ணி",
    "தாத்தா": "பாட்டி",
    "சகோதரன்": "சகோதரி",
    "சித்தப்பா": "சித்தி",
    "பேரன்": "பேத்தி",
    "தோழன்": "தோழி",
    "சிறுவன்": "சிறுமி",
    "தந்தை": "தாய்‌",
    "மருமகன்": "மருமகள்",
    "அரசன்": "அரசி",
    "கணவன்": "மனைவி",
    "தலைவன்": "தலைவி",
    "ஆசிரியர்": "ஆசிரியை",
    "மாணவன்": "மாணவி"
  }}
  ,
  exercise4 : {
    title : "ஆண்பால்‌ பெண்பால்‌",
    description : "ஆண்பால்‌ சொற்களை பெண்பால்‌ சொற்களாக மாற்றுதல்‌ ",
    titleA :'ஆண்பால்‌',
    titleB :'பெண்பால்‌',
data: {
"விழுந்தான்‌": "விழுந்தாள்‌",
"பாடினான்‌": "பாடினாள்‌",
"விளையாடினான்‌": "விளையாடினாள்‌",
"செல்கிறான்‌": "செல்கிறாள்‌",
"செய்தான்‌": "செய்தாள்‌",
"அழைத்தான்‌": "அழைத்தாள்‌",
"உறங்கினான்‌": "உறங்கினாள்‌"
}
  },
    exercise5 : {
        title : "பெயரெச்சம்‌‌",
        description : "பெயரெச்சத்தை கொடுக்கப்பட்டிருக்கும்‌ வாக்கியங்களோடு  பொருத்து‌‌‌ ",
        titleA :'பெயரெச்சம்‌‌',
        titleB :' வாக்கியங்கள்‌',
data: {
    "வாங்கிய": " நான்‌ ___ சட்டை அழகாக இருந்தது.",
    "சமைத்த":"அம்மா __ உணவு சுவையாக இருந்தது.",
    "படித்த": "முரளி __ புத்தகம்‌ இதுதான்‌.",
    "பார்த்த": "நான்‌ _ படம்‌ நன்றாக இருந்தது",
    "செய்த": "அவன்‌ ___ வீடு அழகாக இருந்தது.",
    "பழுத்த": "__ மாம்பழங்கள்‌ சுவையாக இருந்தன..",
    "சொன்ன": "பாட்டி __ கதை அருமையாக இருந்தது.",
    "பாடிய/பாடின": "மாலா __ பாட்டு அனைவரையும்‌ கவர்ந்தது.",
    "கொடுத்த" :"கோழி, நான்‌ __ தானியங்களைக்‌ கொத்தித்‌தின்றது."

}},
exercise6 : {
    title : "பெயரெச்சம்‌‌",
    description : "பெயரெச்சத்தை கொடுக்கப்பட்டிருக்கும‌ வாக்கியங்களோடு  பொருத்து‌‌‌ ",
    titleA :'பெயரெச்சம்‌‌',
    titleB :' வாக்கியங்கள்‌',
data: {
"அழுத": "__ குழந்தை சிரித்தது.",
"போன" : "கடைக்குப்‌ ___ தம்பி இப்போதுதான்‌ வந்தான்‌.",
"கண்ட" : "நான்‌ __ கனவு பலித்துவிட்டது.",
"இருக்கிற": "என்‌ அம்மாவிடம்‌ ___ சேலைகள்‌ எல்லாம்‌ அழகான சேலைகள்‌.",
"உட்கார்கிற": "தாத்தா __ நாற்காலி எங்கே?",
"தைத்த" : "இது யார்‌ __சட்டை?",
"உடைந்த": " __ கண்ணாடியைத்‌ தொடக்கூடாது.",
"கேட்ட": "ஆசிரியர்‌ __ கேள்விக்குப்‌ பதில்‌ தெரியமா?"
}},
exercise7 : {
title : "வினையெச்சம்‌",
description : "வினையெச்சத்தை கொடுக்கப்பட்டிருக்கும‌ வாக்கியங்களோடு  பொருத்து‌‌‌ ",
titleA :'வினையெச்சம்‌',
titleB :' வாக்கியங்கள்‌',
data: {
"சென்று" : "மாணவர்கள்‌ வகுப்பிற்குள்‌ __  அமர்ந்தார்கள்‌.",
"வென்று":"பாபு ஓட்டப்பந்தயத்தில்‌ __ பரிசு வாங்கினான்‌.",
"பறித்து" : "அவன்‌ மரத்தில்‌ பழம்‌ __ சாப்பிட்டான்‌.",
"தேடி": "எறும்புகள்‌  __ உணவைத்‌ உண்கின்றன.",
"நடந்து": "குமரனின்‌ திருமணம்‌ __  ஒரு மாதம்‌ ஆகிவிட்டது.",
"விளையாடி" : "பூங்காவில்‌ குழந்தைகள்‌ __ மகிழ்ந்தார்கள்‌.",
"படித்து" : "அந்த மாணவன்‌ நன்றாகப்‌ __, தேர்வு எழுதினான்‌.",
"உட்கார்ந்து" : "இங்கே ___ சாப்பிடுங்கள்‌."}},

exercise8 : {
title : "வினையெச்சம்‌",
description : "வினையெச்சத்தை கொடுக்கப்பட்டிருக்கும‌ வாக்கியங்களோடு  பொருத்து‌‌‌ ",
titleA :'வினையெச்சம்‌',
titleB :' வாக்கியங்கள்‌',
shuffleA: true,
data: {
"விளையாடி": "நான்‌ நீண்ட நேரம்‌ __ களைத்துப்‌ போனேன்‌.",
"போய்‌": "என்‌ ஆசிரியர்‌ கடைக்குப்‌ __ புத்தகம்‌ வாங்கினார்‌.",
"உழைத்து": "அவள்‌ கடுமையாக தேர்வில்‌ __ வெற்றி பெற்றாள்‌.",
"கொடுத்து": "நான்‌ காசு __ , ",
"வாங்கி" : "பழம்‌ __ சாப்பிட்டேன்‌.",
"ஏறி": "அவன்‌ தென்னை மரத்தில்‌ __ , ‌",
"பறித்து" : " இளநீர்‌ __ குடித்தான்‌.",
"இறங்கி": "பயணிகள்‌, பேருந்திலிருந்து __ வந்தார்கள்‌."
}},
exercise9 : {
title : "ஒலி வேறுபாட்டுச்‌ சொற்கள்‌",
description : "ஒலிசவேறுபாட்டுச்‌ சொற்களை  வாக்கியங்களோடு பொருத்துக",
titleA :'ஒலிசவேறுபாட்டுச்‌ சொற்கள்‌',
titleB :' வாக்கியங்கள்‌',
data: {
"இரங்கி": "அவன் தன் தோழியின் வேதனைக்கு __னான்",
"இறங்கி": "அவன் பேருந்திலிருந்து __  சென்றான்.",
"அருந்து": "அவன் தேநீர் __மாறு  நண்பர்களிடம் கேட்டான் ",
"அறுந்து": "பட்டம் காற்றின் வேகத்தால்  அறுந்து  விழுந்தது",
"அரிய" : "அவன் __ பணி மூலம் பலரின் விருப்பத்தை பெற்றான்.",
"அறிய" : "நான் அவனது உண்மை நிலையை _ விரும்புகிறேன்.",
"கீறி" : "கல் வேகமாக பட்டதால் கண்ணாடி __ விட்டது.",
"கீரி" : "__ ஓர் வகை சிறிய உயிரினம்."
}},
exercise10 : {
title : "ஒலி வேறுபாட்டுச்‌ சொற்கள்‌",
description : "ஒலி வேறுபாட்டுச்‌ சொற்களை  வாக்கியங்களோடு பொருத்துக",
titleA :'ஒலி வேறுபாட்டுச்‌ சொற்கள்‌',
titleB :' வாக்கியங்கள்‌',
data: {
"இலை" : "மழை பெய்ததால் செடியில் புதிய __  முளைத்தது",
"இளை" : "ஆசாரி  மரத்தை __த்து மரசிற்பங்கள் செய்தார் ",
"இழை"  : "அம்மாவின்  புடவை பருத்தி __ கொண்டு தயாரிக்கபட்டுள்ளது .",
"ஆள்‌" : "அவன் நல்ல __ என்று அனைவரும் சொல்கிறார்கள்",
"ஆழ்‌" : "கடல் மிகவும் __மாக உள்ளது.",
"ஒலி" : "அந்த சிறுவன்  இசை __ கேட்டு மகிழ்ந்தான்",
"ஒளி" : "சூரிய __ அறை முழுவதும் பரவி உள்ளது",
"ஒழி" : "நாம் பொறாமையை __த்து வாழ வேண்டும்",
"விழி" :"அவளுடைய __ளில் அழகிய வெளிச்சம் இருந்தது.",
 "விளி": "அவன் சந்தேகங்களை தெளிவுபடுத்த ஆசிரியரை தொலைபேசியில் __த்து அழைத்தான்"
}},
exercise11 : {
title : "ஒலி வேறுபாட்டுச்‌ சொற்கள்‌",
description : "ஒலி வேறுபாட்டுச்‌ சொற்களை  வாக்கியங்களோடு பொருத்துக",
titleA :'ஒலி வேறுபாட்டுச்‌ சொற்கள்‌',
titleB :' வாக்கியங்கள்‌',
data: {
    "வால்‌": "நாயின் __ வளைந்த நிலையில் இருந்தது",
    "வாழ்‌": "இந்த மரம் இங்கு நீண்ட காலமாக __கிறது.",
    "வாள்‌": "வீரன் தன் __(ஐ) உறுதியாக பிடித்துக்கொண்டு போருக்கு சென்றான்",
    "குலை": "என் வீட்டில் உள்ள வாழைமரத்தில் இன்று ஒரு __ வந்துவிட்டது",
    "குழை": " அவன் தோட்டத்தில்  மண்ணை   __த்து  பானை செய்தான்.",
    "அல்லி": "அந்த தோட்டத்தில்  __ மலர்கள் பூத்திருந்தன.",
    "அள்ளி": "அரசன் பொன் நாணயங்களை __ அளித்தான்.",
    "அலை": "கடலில் __கள் மிக அதிகமாக வருகிறன.",
    "அழை": "அவன் நண்பரை __த்து விருந்து அளித்தான் ",}},
exercise12 : {
title : "ஒலி வேறுபாட்டுச்‌ சொற்கள்‌",
description : "ஒலி வேறுபாட்டுச்‌ சொற்களை  வாக்கியங்களோடு பொருத்துக",
titleA :'ஒலி வேறுபாட்டுச்‌ சொற்கள்‌',
titleB :' வாக்கியங்கள்‌',
data: {
    "என்ன": "நீ __ செய்ய விரும்புகிறாய்?" ,
    "எண்ண": "அப்பா ஒரு வாரத்திற்கு தேவையான பணத்தை ___(இ)னார்" ,
    "கனி": "மரத்தில் பழுத்த __ மிகவும் ருசியானது." ,
    "கணி": "வானிலை ஆய்வாளர்கள் மழையை __த்து அறிவித்தனர்" ,
    "உன்‌": "__ நண்பர் அழகாக பேசுகிறார்." ,
    "உண்‌": "அவன் சாப்பாட்டை சீராக __டான்" ,
    "என்‌": "இது __ புத்தகம்." ,
    "எண்‌": "1 முதல் 10 வரை உள்ள __களை வரிசையாக கூறு" }},
  };
  

const wordsList = document.getElementById("words-list");
const meaningsList = document.getElementById("meanings-list");
const exerciseSelect = document.getElementById("exercise-select");
exerciseSelect.innerHTML = Object.keys(exercises).map(exercise => {
  return `<option value="${exercise}">${exercises[exercise].title}</option>`;
}).join("");    

const description = document.getElementById("description");
exerciseSelect.addEventListener("change", (e) => {
  description.textContent = exercises[e.target.value].description;
});

// Shuffle array helper function
function shuffleArray(array) {
  return array.sort(() => Math.random() - 0.5);
}

// Load the selected exercise
function loadExercise(exercise) {


  // Get the words and meanings for the selected exercise
  const exerciseJson = exercises[exercise];
        // Clear existing content
        wordsList.innerHTML = `<h3>${exerciseJson.titleA}</h3>`;
  meaningsList.innerHTML = `<h3>${exerciseJson.titleB}</h3>`;

  if(exerciseJson.shuffleA) {
    // Shuffle and load words
    const shuffledWords = shuffleArray(Object.keys(exerciseJson.data));
    shuffledWords.forEach(key => {
      const wordElement = document.createElement("div");
      wordElement.className = "word";
      wordElement.draggable = true;
      wordElement.dataset.word = key.toLowerCase();
      wordElement.textContent = key;
      wordsList.appendChild(wordElement);
    });
    const shuffledMeanings = (Object.entries(exerciseJson.data));
  shuffledMeanings.forEach(([key, value]) => {
    const meaningElement = document.createElement("div");
    meaningElement.className = "drop-zone";
    meaningElement.dataset.word = key.toLowerCase();
    meaningElement.textContent = value;
    meaningsList.appendChild(meaningElement);
  });
  } else { //shuffle values
    // Shuffle and load words
    Object.keys(exerciseJson.data).forEach(key => {
      const wordElement = document.createElement("div");
      wordElement.className = "word";
      wordElement.draggable = true;
      wordElement.dataset.word = key.toLowerCase();
      wordElement.textContent = key;
      wordsList.appendChild(wordElement);
    });
    const shuffledMeanings = shuffleArray(Object.entries(exerciseJson.data));
  shuffledMeanings.forEach(([key, value]) => {
    const meaningElement = document.createElement("div");
    meaningElement.className = "drop-zone";
    meaningElement.dataset.word = key.toLowerCase();
    meaningElement.textContent = value;
    meaningsList.appendChild(meaningElement);
  });
  }


  // Attach drag and drop events
  initializeDragAndDrop();
} 


// Drag and drop functionality
function initializeDragAndDrop() {
  const words = document.querySelectorAll(".word");
  const dropZones = document.querySelectorAll(".drop-zone");

  let draggedItem = null;

  // Drag events for words
  words.forEach(word => {
    word.addEventListener("dragstart", () => {
      draggedItem = word;
    });

    word.addEventListener("dragend", () => {
      draggedItem = null;
    });
  });

  // Drop zone events
  dropZones.forEach(zone => {
    zone.addEventListener("dragover", (e) => {
      e.preventDefault();
      zone.classList.add("hovered");
    });

    zone.addEventListener("dragleave", () => {
      zone.classList.remove("hovered");
    });

    zone.addEventListener("drop", () => {
      zone.classList.remove("hovered");

      // Clear previous word if any
      if (zone.hasChildNodes()) {
        zone.innerHTML = zone.dataset.word;
      }

      if (draggedItem) {
        // Append the dragged word to the drop zone
        zone.textContent = "";
        zone.appendChild(draggedItem);

        // Check if it's correct
        if (zone.dataset.word === draggedItem.dataset.word) {
          zone.classList.add("correct");
          zone.classList.remove("wrong");
        } else {
          zone.classList.add("wrong");
          zone.classList.remove("correct");
        }
      }
    });
  });
}

// Load the default exercise
loadExercise("exercise1");

// Update the exercise when the selector changes
exerciseSelect.addEventListener("change", (e) => {
  loadExercise(e.target.value);
});